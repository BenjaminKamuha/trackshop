{% load math_tags %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #000;
            padding: 6px;
            text-align: left;
        }

        th {
            background-color: #f0f0f0;
        }

        .border {
            border: 2px solid black;
        }
        
        .flex {
            display: flex;
            justify-content: space-between;
        }

    </style>
</head>

<h2>Inventaire {{ inventory.start_date }} - {{ inventory.end_date }}</h2>

<form action="{% url 'TrackShop:inventory-detail' inventory.pk %}" method="POST">
    {% csrf_token %}
    <table>
        <thead>
            <tr>
                <th>Produit</th>
                <th>Stock système</th>
                <th>Stock physique</th>
                <th>Différence</th>
                <th>Prix USD</th>
                <th>Valeur écart</th>
            </tr>
        </thead>
        <tbody>
            {% for item in inventory.items.all %}
            <tr>
                <td>{{ item.product.name }}</td>
                <td>{{ item.system_quantity }}</td>
                <td>
                    <input type="number" name="physical_{{ item.id }}" value="{{ item.physical_quantity }}">
                </td>
                
                <th>{{ item.difference }}</th>
                <th>{{ item.product.price }}</th>
                <td>
                    {{ item.difference|mul:item.product.price }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
        <button type="submit">Enregistrer</button><a href="{% url 'TrackShop:inventory-detail-pdf' inventory.pk %} ">Exporter en pdf</a>
</form>