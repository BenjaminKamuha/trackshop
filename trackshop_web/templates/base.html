{% load static django_htmx django_browser_reload %}

<!DOCTYPE html>
<html class="light">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Trackshop</title>
	{% htmx_script %}
	<script src="{% static 'trackshop/sale.js' %}" defer></script>
	<script src="{% static 'trackshop/kpi.js' %}"></script>
	<style>
		.hidden {
			display: none;
		}
		.total-box { margin-top: 15px; }
		table { border-collapse: collapse; width: 100%; }
		th, td {border: 1px solid #333; padding: 6px; }

		ul{
			list-style-type: none;
		}

		.box{
			cursor: pointer;
		}
	</style>
	<link rel="stylesheet" href="{% static 'dist/output.css' %}">
</head>
<body class="bg-white dark:bg-gray-800 text-black dark:text-white">
	{% if debug %}
		{% django_browser_reload_script %}
	{% endif %}
	<header class="flex justify-between fixed items-center w-full p-2 dark:shadow-2xl shadow-xl backdrop-blur-lg pl-5 pr-5">
			<span id="logo" class="border flex items-center rounded-full p-2 w-15 h-15 text-5xl">Ts</span> 
			<nav class="" >
				{% block nav %}
				    <ul id="main_nav" class="w-full">
						<a href="{% url 'TrackShop:dashboard' %}">Dashboard</a>
						<a href="{% url 'TrackShop:stock' %}" class="ml-10">Stock</a>
						<a href="{% url 'TrackShop:create-purchase' %}" class="ml-10">Achat</a>
						<a href="{% url 'TrackShop:sale-create' %}" class="ml-10">Vente</a>
						<a href="{% url 'TrackShop:cash_book' %}" class="ml-10">Livre de caisse</a>
						<a href="{% url 'TrackShop:inventory' %}" class="ml-10">Inventaire</a>
						<a href="{% url 'TrackShop:client' %}" class="ml-10">Clients</a>
					</ul>
				{% endblock %}
			</nav>
			<div class="flex items-center">
				{% block profil %}
					<div class="border-r-2 border-gray-600 pr-2">
						<p class="text-lg">{{ request.user }}</p>
						<p class="text-sm">{{ request.active_shop }}</p>
					</div>
					<div>
						<a href="{% url 'Account:setting' %}"><img  
						src="{% static 'img/setting.svg' %}" alt="Setting"
						class="ml-2 w-6 dark:invert transition duration-300"
						></a>
					</div>
					

				{% endblock %}
			</div>
	</header>

	<main class="flex pt-15">
			<div class="flex justify-between pt-10 w-60 p-2 shadow-xl h-169 ">
				<div>
					{% block sub_menu %}
					{% endblock %}
				</div>
			</div>
		<div class="w-full p-10 0 15px 0 15px">
			{% block content %}
			{% endblock %}	
		</div>
		<div id="form" style="border: 1px solid violet; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;" class="backdrop-blur-lg">
			{% block form %}
			{% endblock %}
		</div>
	</main>
	{% block scripts %}
	{% endblock %}
</body>
<footer>
</footer>


	<script>
(function () {
  const root = document.documentElement
  const btn = document.getElementById("theme-toggle")

  // Charger le thème sauvegardé
  const savedTheme = localStorage.getItem("theme")
  if (savedTheme === "dark") {
    root.classList.add("dark")
    btn.textContent = "☀️ Light"
  }

  btn.addEventListener("click", () => {
    const isDark = root.classList.toggle("dark")
    localStorage.setItem("theme", isDark ? "dark" : "light")
    btn.textContent = isDark ? "☀️ Light" : "� Dark"
  })
})()
</script>

</html>